<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Auto Battler</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="bg-layer"></div>
    <div id="loading"><div class="spinner"></div>LOADING RESOURCES</div>

    <div id="ui-layer">
        <div id="top-bar" class="glass-panel pointer-events-auto">
            <div class="stat-group">
                <div class="stat-item" style="color: #ff5f57;"><span class="stat-icon">‚ù§Ô∏è</span> <span id="ui-hp">100</span></div>
                <div class="stat-item" style="color: #febc2e;"><span class="stat-icon">üí∞</span> <span id="ui-gold">10</span></div>
                <div class="stat-item" style="color: #fff;"><span class="stat-icon">‚öîÔ∏è</span> <span id="ui-round">1</span></div>
            </div>
            <div class="control-group">
                <button id="btn-syn-mobile" class="icon-btn" onclick="game.toggleSynergyMobile()">üîÆ</button>
                <button class="icon-btn" onclick="game.toggleLang()">üåê</button>
                <button class="icon-btn" onclick="game.showRankings()">üèÜ</button>
                <button class="icon-btn" onclick="game.showGuide()">üìñ</button> 
            </div>
        </div>

        <div id="synergy-float"></div>

        <div id="shop-dock" class="glass-panel pointer-events-auto">
            <div class="dock-header">
                <div class="dock-toggle-btn" onclick="game.toggleShopMinimize()">
                    <span id="shop-chevron">‚ñº Hide Shop</span>
                </div>
            </div>
            <div class="shop-cards" id="shop-container"></div>

            <div class="shop-actions"> <button class="action-btn btn-reroll" onclick="game.rerollShop()">
                    <span style="font-size:18px; margin-right:5px;">‚Ü∫</span> 
                    <span id="txt-reroll">Reroll</span> 
                    <span style="opacity:0.6; font-size:12px; margin-left:4px;">(2g)</span>
                </button>
                <button id="btn-battle" class="action-btn btn-battle" onclick="game.toggleState()">
                    <span style="font-size:18px;">‚öîÔ∏è</span> 
                    <span id="txt-battle">Start Battle</span>
                </button>
            </div>
        </div>
    </div>

    <div id="canvas-wrapper">
        <canvas id="gameCanvas"></canvas>
    </div>

    <div id="login-modal" class="modal-overlay pointer-events-auto">
        <div class="modal-card">
            <h2 id="t-login-title">Welcome</h2>
            <p id="t-login-desc">Enter Commander Name</p>
            <input type="text" id="username-input" class="apple-input" placeholder="Nickname" maxlength="12">
            <button class="action-btn btn-battle" style="width:100%; justify-content:center;" onclick="game.login()">Start Game</button>
        </div>
    </div>

    <div id="rank-modal" class="modal-overlay pointer-events-auto" onclick="if(event.target===this) this.style.display='none'">
        <div class="modal-card" style="text-align:left;">
            <h2 id="t-rank-title">Leaderboard</h2>
            <div id="rank-list-content" style="max-height:300px; overflow-y:auto; margin:20px 0; font-size:14px;"></div>
            <button class="action-btn btn-reroll" style="width:100%; justify-content:center;" onclick="document.getElementById('rank-modal').style.display='none'">Close</button>
        </div>
    </div>

    <div id="guide-modal" class="modal-overlay pointer-events-auto" onclick="if(event.target===this) this.style.display='none'">
        <div class="modal-card" style="width: 90%; max-width: 550px; text-align: left;">
            <h2 id="t-guide-title" style="margin-bottom: 15px;">Game Guide</h2>
            
            <div id="t-guide-content" style="max-height: 60vh; overflow-y: auto; font-size: 13px; line-height: 1.6; color: #ccc; padding-right: 10px;">
                </div>

            <button class="action-btn btn-reroll" style="width:100%; margin-top:20px; justify-content:center;" onclick="document.getElementById('guide-modal').style.display='none'">Close</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>